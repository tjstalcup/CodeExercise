const e=document.getElementById("results"),t=document.getElementById("filter-genre-list"),r=document.getElementById("filter-year-list");let n={media:[],genres:[],years:[],genreShow:!1,yearShow:!1,selectedGenre:[],selectedYear:[],mediaType:"",search:""};function s(e){e.preventDefault(),n={...n,selectedGenre:[],selectedYear:[],mediaType:"",search:""},Array.from(document.getElementsByClassName("media-filter")).forEach((e=>e.checked=!1)),document.getElementById("filter-bar-search").value="",o()}function a(e){n.mediaType=e.currentTarget.id.replace("media-filter-",""),o()}function c(e){const t=e.currentTarget.id.replace("filter-","")+"Show";n[t]=!n[t],o()}function l(e){n.search=e.currentTarget.value,o()}function i(e){!0===e.currentTarget.checked?n.selectedGenre.push(e.currentTarget.value):n.selectedGenre=n.selectedGenre.filter((t=>t!==e.currentTarget.value)),o()}function d(e){!0===e.currentTarget.checked?n.selectedYear.push(e.currentTarget.value):n.selectedYear=n.selectedYear.filter((t=>t!==e.currentTarget.value)),o()}function o(){console.log({state:n}),e.innerHTML="",t.innerHTML="",r.innerHTML="";let o=n.media;""!==n.mediaType&&(o=o.filter((e=>e.type===n.mediaType))),n.selectedGenre.length>0&&(o=o.filter((e=>e.genre.some((e=>n.selectedGenre.includes(e)))))),n.selectedYear.length>0&&(o=o.filter((e=>n.selectedYear.includes(e.year)))),""!==n.search&&(o=o.filter((e=>e.title.toLowerCase().indexOf(n.search.toLowerCase())>=0))),o.map((t=>{const r=`\n            <div class="results-item">\n                <img src="${t.poster}" class="results-item-poster"/>\n                <h3>${t.title}</h3>\n                <h4>Genres: ${t.genre.map((e=>" "+e[0].toUpperCase()+e.substring(1))).toString()}</h4>\n            </div>\n        `;e.insertAdjacentHTML("beforeend",r)})),n.genres.map((e=>{const r=`<li class="filter-bars-filter-list-item"><input type="checkbox" class="genre-check" value="${e}" ${n.selectedGenre.includes(e)?"checked":""} />${e[0].toUpperCase()+e.substring(1)}</li>`;t.insertAdjacentHTML("beforeend",r)})),n.years.map((e=>{const t=`<li class="filter-bars-filter-list-item"><input type="checkbox" class="year-check" value="${e}" ${n.selectedYear.includes(e)?"checked":""} />${e}</li>`;r.insertAdjacentHTML("beforeend",t)})),Array.from(document.getElementsByClassName("genre-check")).forEach((e=>e.addEventListener("change",i))),Array.from(document.getElementsByClassName("year-check")).forEach((e=>e.addEventListener("change",d))),document.getElementsByClassName("filter-bar-sub-clear")[0].addEventListener("click",s),Array.from(document.getElementsByClassName("media-filter")).forEach((e=>e.addEventListener("change",a))),Array.from(document.getElementsByClassName("filter-bar-filters-filter")).forEach((e=>e.addEventListener("click",c))),Array.from(document.getElementsByClassName("filter-bar-filters-filter")).forEach((e=>{const t=e.id.replace("filter-","")+"Show";n[t]?document.getElementById(e.id+"-list").classList="filter-bar-filters-list open":document.getElementById(e.id+"-list").classList="filter-bar-filters-list"})),document.getElementById("filter-genre").innerText=n.selectedGenre.length>0?`${n.selectedGenre.length} Genre(s)`:"Genre",document.getElementById("filter-year").innerText=n.selectedYear.length>0?`${n.selectedYear.length} Year(s)`:"Year",document.getElementById("filter-bar-search").addEventListener("keypress",l)}document.onreadystatechange=function(){"complete"==document.readyState&&fetch("https://raw.githubusercontent.com/HubSpotWebTeam/CodeExercise/main/src/js/data/data.json").then((e=>e.json())).then((e=>{n.media=e.media,n.media.map((e=>{n.genres=[...n.genres,...e.genre],n.years=[...n.years,e.year]})),n.genres=n.genres.filter(((e,t,r)=>r.indexOf(e)===t)).sort(),n.years=n.years.filter(((e,t,r)=>r.indexOf(e)===t)).sort(((e,t)=>e-t)),o()})).catch((e=>console.error(e)))};
//# sourceMappingURL=index.6c159cf0.js.map
