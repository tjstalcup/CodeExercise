{"mappings":"AAEA,MAAMA,EAAUC,SAASC,eAAe,WAClCC,EAAYF,SAASC,eAAe,qBACpCE,EAAWH,SAASC,eAAe,oBAEzC,IAAIG,EAAQ,CACRC,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,WAAW,EACXC,UAAU,EACVC,cAAe,GACfC,aAAc,GACdC,UAAW,GACXC,OAAQ,aAGHC,EAAaC,GAClBA,EAAEC,iBACFZ,EAAQ,IACDA,EACHM,cAAe,GACfC,aAAc,GACdC,UAAW,GACXC,OAAQ,IAEZI,MAAMC,KAAKlB,SAASmB,uBAAuB,iBAAiBC,SAAQC,GAAIA,EAAGC,SAAU,IACrFtB,SAASC,eAAe,qBAAqBsB,MAAM,GACnDC,aAGKC,EAAaV,GAClBX,EAAMQ,UAAYG,EAAEW,cAAcC,GAAGC,QAAQ,gBAAgB,IAC7DJ,aAGKK,EAAcd,GACnB,MAAMe,EAAMf,EAAEW,cAAcC,GAAGC,QAAQ,UAAU,IAAI,OACrDxB,EAAM0B,IAAQ1B,EAAM0B,GACpBN,aAGKO,EAAWhB,GAChBX,EAAMS,OAASE,EAAEW,cAAcH,MAC/BC,aAGKQ,EAAajB,IACW,IAA1BA,EAAEW,cAAcJ,QACflB,EAAMM,cAAcuB,KAAKlB,EAAEW,cAAcH,OAEzCnB,EAAMM,cAAgBN,EAAMM,cAAcwB,QAAOC,GAAOA,IAAQpB,EAAEW,cAAcH,QAEpFC,aAGKY,EAAYrB,IACY,IAA1BA,EAAEW,cAAcJ,QACflB,EAAMO,aAAasB,KAAKlB,EAAEW,cAAcH,OAExCnB,EAAMO,aAAeP,EAAMO,aAAauB,QAAOG,GAAMA,IAAOtB,EAAEW,cAAcH,QAEhFC,aAIKA,IACLc,QAAQC,IAAI,OAACnC,IACbL,EAAQyC,UAAU,GAClBtC,EAAUsC,UAAU,GACpBrC,EAASqC,UAAU,GAEnB,IAAIC,EAAQrC,EAAMC,MACG,KAAlBD,EAAMQ,YACL6B,EAAQA,EAAMP,QAAOQ,GAAMA,EAAKC,OAAOvC,EAAMQ,aAE9CR,EAAMM,cAAckC,OAAO,IAC1BH,EAAQA,EAAMP,QAAOQ,GAAMA,EAAKP,MAAMU,MAAKV,GAAO/B,EAAMM,cAAcoC,SAASX,QAEhF/B,EAAMO,aAAaiC,OAAO,IACzBH,EAAQA,EAAMP,QAAOQ,GAAMtC,EAAMO,aAAamC,SAASJ,EAAKL,SAE9C,KAAfjC,EAAMS,SACL4B,EAAQA,EAAMP,QAAOQ,GAAMA,EAAKK,MAAMC,cAAcC,QAAQ7C,EAAMS,OAAOmC,gBAAgB,KAE7FP,EAAMS,KAAI7C,IACN,MAAMqC,EAAI,uEAEUrC,EAAM8C,8DACZ9C,EAAM0C,2CACE1C,EAAM8B,MAAMe,KAAIf,GAAO,IAAIA,EAAM,GAAGiB,cAAcjB,EAAMkB,UAAU,KAAIC,gDAG5FvD,EAAQwD,mBAAmB,YAAYb,MAE3CtC,EAAME,OAAO4C,KAAIf,IACb,MAAMO,EAAI,8FAAiGP,MAAU/B,EAAMM,cAAcoC,SAASX,GAAS,UAAY,QAAQA,EAAM,GAAGiB,cAAcjB,EAAMkB,UAAU,UACtNnD,EAAUqD,mBAAmB,YAAYb,MAE7CtC,EAAMG,MAAM2C,KAAIb,IACZ,MAAMK,EAAI,6FAAgGL,MAASjC,EAAMO,aAAamC,SAAST,GAAQ,UAAY,QAAQA,SAC3KlC,EAASoD,mBAAmB,YAAYb,MAG5CzB,MAAMC,KAAKlB,SAASmB,uBAAuB,gBAAgBC,SAAQC,GAAIA,EAAGmC,iBAAiB,SAASxB,KACpGf,MAAMC,KAAKlB,SAASmB,uBAAuB,eAAeC,SAAQC,GAAIA,EAAGmC,iBAAiB,SAASpB,KAEnGpC,SAASmB,uBAAuB,wBAAwB,GAAGqC,iBAAiB,QAAQ1C,GACpFG,MAAMC,KAAKlB,SAASmB,uBAAuB,iBAAiBC,SAAQC,GAAIA,EAAGmC,iBAAiB,SAAS/B,KACrGR,MAAMC,KAAKlB,SAASmB,uBAAuB,8BAA8BC,SAAQC,GAAIA,EAAGmC,iBAAiB,QAAQ3B,KACjHZ,MAAMC,KAAKlB,SAASmB,uBAAuB,8BAA8BC,SAAQC,IAC7E,MAAMS,EAAMT,EAAGM,GAAGC,QAAQ,UAAU,IAAI,OACrCxB,EAAM0B,GACL9B,SAASC,eAAeoB,EAAGM,GAAG,SAAS8B,UAAU,+BAEjDzD,SAASC,eAAeoB,EAAGM,GAAG,SAAS8B,UAAU,6BAIzDzD,SAASC,eAAe,gBAAgByD,UAAYtD,EAAMM,cAAckC,OAAS,EAAC,GAAMxC,EAAMM,cAAckC,kBAAoB,QAChI5C,SAASC,eAAe,eAAeyD,UAAYtD,EAAMO,aAAaiC,OAAS,EAAC,GAAMxC,EAAMO,aAAaiC,iBAAmB,OAE5H5C,SAASC,eAAe,qBAAqBuD,iBAAiB,WAAWzB,GAwB7E/B,SAAS2D,mBAAqB,WACC,YAAvB3D,SAAS4D,YAjBbC,MAAM,4FACDC,MAAKC,GAAKA,EAAIC,SACdF,MAAKG,IACF7D,EAAMC,MAAQ4D,EAAK5D,MACnBD,EAAMC,MAAM6C,KAAI7C,IACZD,EAAME,OAAS,IAAIF,EAAME,UAAUD,EAAM8B,OACzC/B,EAAMG,MAAQ,IAAIH,EAAMG,MAAMF,EAAMgC,SAExCjC,EAAME,OAASF,EAAME,OAAO4B,QAAM,CAAEX,EAAM2C,EAAMC,IAAOA,EAAKlB,QAAQ1B,KAAS2C,IAAOE,OACpFhE,EAAMG,MAAQH,EAAMG,MAAM2B,QAAM,CAAEX,EAAM2C,EAAMC,IAAOA,EAAKlB,QAAQ1B,KAAS2C,IAAOE,MAAI,CAAEC,EAAEC,IAAID,EAAEC,IAEhG9C,OAEH+C,OAAMC,GAAKlC,QAAQmC,MAAMD","sources":["src/js/index.js"],"sourcesContent":["import '../styles/index.css';\n\nconst results = document.getElementById('results');\nconst genreList = document.getElementById('filter-genre-list');\nconst yearList = document.getElementById('filter-year-list');\n\nlet state = {\n    media: [],\n    genres: [],\n    years: [],\n    genreShow: false,\n    yearShow: false,\n    selectedGenre: [],\n    selectedYear: [],\n    mediaType: '',\n    search: ''\n}\n\nfunction clearFilters(e){\n    e.preventDefault();\n    state = {\n        ...state,\n        selectedGenre: [],\n        selectedYear: [],\n        mediaType: '',\n        search: ''\n    }\n    Array.from(document.getElementsByClassName('media-filter')).forEach(el=>el.checked = false);\n    document.getElementById('filter-bar-search').value='';\n    render();\n}\n\nfunction setMediaType(e){\n    state.mediaType = e.currentTarget.id.replace(\"media-filter-\",\"\");\n    render();\n}\n\nfunction showDropdowns(e){\n    const key = e.currentTarget.id.replace(\"filter-\",\"\")+\"Show\";\n    state[key] = !state[key]\n    render();\n}\n\nfunction saveSearch(e){\n    state.search = e.currentTarget.value;\n    render();\n}\n\nfunction toggleGenres(e){\n    if(e.currentTarget.checked===true){\n        state.selectedGenre.push(e.currentTarget.value);\n    } else {\n        state.selectedGenre = state.selectedGenre.filter(genre=>genre!==e.currentTarget.value);\n    }\n    render();\n}\n\nfunction toggleYears(e){\n    if(e.currentTarget.checked===true){\n        state.selectedYear.push(e.currentTarget.value);\n    } else {\n        state.selectedYear = state.selectedYear.filter(year=>year!==e.currentTarget.value);\n    }\n    render();\n}\n\n\nfunction render(){\n    console.log({state});\n    results.innerHTML='';\n    genreList.innerHTML='';\n    yearList.innerHTML='';\n    \n    let items = state.media;\n    if(state.mediaType!==''){\n        items = items.filter(item=>item.type===state.mediaType);\n    }\n    if(state.selectedGenre.length>0){\n        items = items.filter(item=>item.genre.some(genre=>state.selectedGenre.includes(genre)));\n    }\n    if(state.selectedYear.length>0){\n        items = items.filter(item=>state.selectedYear.includes(item.year));\n    }\n    if(state.search!==''){\n        items = items.filter(item=>item.title.toLowerCase().indexOf(state.search.toLowerCase())>=0);\n    }\n    items.map(media=>{\n        const item = `\n            <div class=\"results-item\">\n                <img src=\"${media.poster}\" class=\"results-item-poster\"/>\n                <h3>${media.title}</h3>\n                <h4>Genres: ${media.genre.map(genre=>\" \"+genre[0].toUpperCase()+genre.substring(1)).toString()}</h4>\n            </div>\n        `;\n        results.insertAdjacentHTML('beforeend',item);\n    });\n    state.genres.map(genre=>{\n        const item = `<li class=\"filter-bars-filter-list-item\"><input type=\"checkbox\" class=\"genre-check\" value=\"${genre}\" ${state.selectedGenre.includes(genre) ? 'checked' : ''} />${genre[0].toUpperCase()+genre.substring(1)}</li>`;\n        genreList.insertAdjacentHTML('beforeend',item);\n    });\n    state.years.map(year=>{\n        const item = `<li class=\"filter-bars-filter-list-item\"><input type=\"checkbox\" class=\"year-check\" value=\"${year}\" ${state.selectedYear.includes(year) ? 'checked' : ''} />${year}</li>`;\n        yearList.insertAdjacentHTML('beforeend',item);\n    });\n\n    Array.from(document.getElementsByClassName('genre-check')).forEach(el=>el.addEventListener('change',toggleGenres));\n    Array.from(document.getElementsByClassName('year-check')).forEach(el=>el.addEventListener('change',toggleYears));\n\n    document.getElementsByClassName('filter-bar-sub-clear')[0].addEventListener('click',clearFilters)\n    Array.from(document.getElementsByClassName('media-filter')).forEach(el=>el.addEventListener('change',setMediaType));\n    Array.from(document.getElementsByClassName('filter-bar-filters-filter')).forEach(el=>el.addEventListener('click',showDropdowns));\n    Array.from(document.getElementsByClassName('filter-bar-filters-filter')).forEach(el=>{\n        const key = el.id.replace(\"filter-\",\"\")+\"Show\";\n        if(state[key]){\n            document.getElementById(el.id+\"-list\").classList=\"filter-bar-filters-list open\";\n        } else {\n            document.getElementById(el.id+\"-list\").classList=\"filter-bar-filters-list\";\n        }\n    });\n\n    document.getElementById('filter-genre').innerText = state.selectedGenre.length > 0 ? `${state.selectedGenre.length} Genre(s)` : 'Genre';\n    document.getElementById('filter-year').innerText = state.selectedYear.length > 0 ? `${state.selectedYear.length} Year(s)` : 'Year';\n\n    document.getElementById('filter-bar-search').addEventListener('keypress',saveSearch);\n\n\n\n}\n\n\nfunction main(){\n    fetch('https://raw.githubusercontent.com/HubSpotWebTeam/CodeExercise/main/src/js/data/data.json')\n        .then(res=>res.json())\n        .then(data=>{\n            state.media = data.media;\n            state.media.map(media=>{\n                state.genres = [...state.genres,...media.genre];\n                state.years = [...state.years,media.year];\n            });\n            state.genres = state.genres.filter((value,index,self)=>self.indexOf(value)===index).sort();\n            state.years = state.years.filter((value,index,self)=>self.indexOf(value)===index).sort((a,b)=>a-b);\n            \n            render();\n        })\n        .catch(err=>console.error(err));\n}\n\ndocument.onreadystatechange = function () {\n    if (document.readyState == \"complete\") {\n        main();\n    }\n}\n\n"],"names":["$8f6a480bb40b134f$var$results","document","getElementById","$8f6a480bb40b134f$var$genreList","$8f6a480bb40b134f$var$yearList","$8f6a480bb40b134f$var$state","media","genres","years","genreShow","yearShow","selectedGenre","selectedYear","mediaType","search","$8f6a480bb40b134f$var$clearFilters","e","preventDefault","Array","from","getElementsByClassName","forEach","el","checked","value","$8f6a480bb40b134f$var$render","$8f6a480bb40b134f$var$setMediaType","currentTarget","id","replace","$8f6a480bb40b134f$var$showDropdowns","key","$8f6a480bb40b134f$var$saveSearch","$8f6a480bb40b134f$var$toggleGenres","push","filter","genre","$8f6a480bb40b134f$var$toggleYears","year","console","log","innerHTML","items","item","type","length","some","includes","title","toLowerCase","indexOf","map","poster","toUpperCase","substring","toString","insertAdjacentHTML","addEventListener","classList","innerText","onreadystatechange","readyState","fetch","then","res","json","data","index","self","sort","a","b","catch","err","error"],"version":3,"file":"index.6c159cf0.js.map"}